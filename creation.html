<!DOCTYPE html>
<html>
    <head>
        <title>Planets Creation</title>
        <style>
            body { margin: 0; overflow: hidden; }
            canvas { display: block; }
            #controls { position: absolute; top: 10px; left: 10px; color: white; }
            #galaxyButton { position: absolute; top: 10px; right: 20px; color: white; }
            #planetButton { position: absolute; margin-top: 10px; top: 30px; right: 20px; color: white; }
            #creationTab {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%; 
                height: 50%;
                background-color: rgba(0, 0, 0, 0.8);
                display: none;
                flex-direction: column;
                padding: 10px;
                box-sizing: border-box;
                z-index: 1000;
            }
        </style>
    </head>
    <body>
        <div id="controls">
            <label>Camera Angle: <input type="range" id="angleSlider" min="0" max="360" value="0"></label><br>
            <label>Zoom: <input type="range" id="zoomSlider" min="10" max="50" value="20"></label>
        </div>
        <button id="galaxyButton" onclick="window.location.href='galaxy.html'">Galaxy Showcase</button>
        <button id="planetButton">Create Planet</button>

        <div id="creationTab">
            create
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/110/three.min.js"></script>
        <script>
            let scene, camera, renderer, sun;

            function createScene() {
                // Initialize scene, camera, and renderer
                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                renderer = new THREE.WebGLRenderer();
                renderer.setSize(window.innerWidth, window.innerHeight);
                document.body.appendChild(renderer.domElement);

                // Setup background
                const textureLoader = new THREE.TextureLoader();
                textureLoader.load('cosmos.jpg', function(texture) {
                    scene.background = texture;
                });

                // Create the Sun
                const sunGeometry = new THREE.SphereGeometry(4, 32, 32);
                textureLoader.load('sun_texture.jpg', function(texture) {
                    const sunMaterial = new THREE.MeshBasicMaterial({ map: texture });
                    sun = new THREE.Mesh(sunGeometry, sunMaterial);
                    scene.add(sun);
                });

                // Initial Camera Position
                camera.position.set(0, 15, 20);
                camera.lookAt(scene.position);

                // Camera Position Adjustment Functionality
                var angleSlider = document.getElementById("angleSlider");
                var zoomSlider = document.getElementById("zoomSlider");

                // Listen for the changes in the sliders
                angleSlider.addEventListener("input", updateCamera);
                zoomSlider.addEventListener("input", updateCamera);

                function updateCamera() {
                // Convert angle to radius and set the camera's position
                var angle = angleSlider.value * Math.PI / 180;
                var distance = zoomSlider.value;

                camera.position.x = distance * Math.sin(angle);
                camera.position.z = distance * Math.cos(angle);
                camera.lookAt(scene.position);
                }

                // Handle window resizing
                window.addEventListener('resize', function() {
                    camera.aspect = window.innerWidth / window.innerHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(window.innerWidth, window.innerHeight);
                });

                //Creation tab button
                // Show/Hide the info tab when the button is clicked
                planetButton.addEventListener('click', function() {
                    document.getElementById('galaxyButton').style.display = 'none';
                    document.getElementById('planetButton').style.display = 'none';
                    document.getElementById('creationTab').style.display = 'block';
                });


                // Animation Loop
                var animate = function () {
                    requestAnimationFrame(animate);
                    if (sun) {
                        sun.rotation.y += 0.001;  // Rotate the sun if it's loaded
                    }
                    renderer.render(scene, camera);
                }
                animate();
            }

            window.onload = function() {
                createScene();
            };
        </script>
    </body>
</html>